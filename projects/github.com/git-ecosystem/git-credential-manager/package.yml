distributable:
  url: https://github.com/git-ecosystem/git-credential-manager/archive/refs/tags/{{version.tag}}.tar.gz
  strip-components: 1

provides:
  - bin/git-credential-manager

versions:
  github: git-ecosystem/git-credential-manager/tags
  strip: /v/

platform:
  - linux/x86-64

dependencies:
  dotnet.microsoft.com: "^8.0"
  gnu.org/gcc: ">=12"
  git-scm.org: "^2.27.0"
  kerberos.org: "^1.21.3"
  openssl.org: ">=1"
  unicode.org: "^71"
  zlib.net: "^1.3"

build:
  script: dotnet build ./src/linux/Packaging.Linux/Packaging.Linux.csproj -c Release -p:InstallFromSource=true -p:installPrefix={{prefix}}
  env:
    DOTNET_CLI_TELEMETRY_OPTOUT: 1

test: git-credential-manager --version | grep {{version}}