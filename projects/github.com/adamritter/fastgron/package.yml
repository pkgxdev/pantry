distributable:
  url: https://github.com/adamritter/fastgron/archive/refs/tags/v{{version}}.tar.gz
  strip-components: 1

versions:
  github: adamritter/fastgron
  strip:
    - /^v/

dependencies:
  curl.se: '*'

build:
  dependencies:
    llvm.org: '*'
    gnu.org/bash: '^5'
    cmake.org: '^3'
  script:
  - cmake -B build -DCMAKE_CXX_COMPILER=clang++ 
  - cmake --build build
  - mkdir -p {{prefix}}/bin
  - mv build/fastgron {{prefix}}/bin

provides:
  - bin/fastgron

test:
  dependencies:
    curl.se: '*'
  script: test "$(fastgron --version 2>&1| cut -d' ' -f 3)" = {{version}}
