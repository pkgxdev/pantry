distributable:
  url: https://github.com/OutOfBedlam/tine/archive/refs/tags/v{{version}}.zip
  strip-components: 1

display-name: tine

versions:
  github: OutOfBedlam/tine 

build:
  dependencies:
    go.dev: ^1.22
  script: |
    cd tine-{{version}}
    go mod download
    go run magefiles/mage.go buildx v{{version}} _pantry_
    mkdir -p {{prefix}}/bin
    mv ./tmp/tine {{prefix}}/bin/tine
  env:
    GOPROXY: https://proxy.golang.org,direct
    GOSUMDB: sum.golang.org

provides:
  - bin/tine

test:
  script:
    test $(tine version | cut -d" " -f 1) = {{version}}
