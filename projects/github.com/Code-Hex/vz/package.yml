distributable:
  url: https://github.com/Code-Hex/vz/archive/refs/tags/{{version.tag}}.tar.gz
  strip-components: 1
display-name: Code-Hex/vz

versions:
  github: Code-Hex/vz

platforms:
- darwin

build:
  dependencies:
    go.dev: ^1.20
  env:
    CGO_ENABLED: 0
    GO_LDFLAGS:
      - -s
      - -w
  script:
  - go build -v -ldflags="${GO_LDFLAGS}" -o "{{ prefix }}"/bin/codesign ./cmd/codesign/
  - go build -v -ldflags="${GO_LDFLAGS}" -o "{{ prefix }}"/bin/addtags  ./cmd/addtags/

provides:
  - bin/codesign
  - bin/addtags

test: test "$(foo --version)" = {{version}}
