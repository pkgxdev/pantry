distributable:
  url: https://github.com/gromgit/pup/archive/refs/tags/{{version.tag}}.tar.gz
  strip-components: 1

display-name: pup

versions:
  github: gromgit/pup

build:
  dependencies:
    go.dev: ^1.23
  env:
    CGO_ENABLED: 0
    GO_ARGS:
      - -o "{{prefix}}/bin/"
    GO_LDFLAGS:
      - -s
      - -w
    linux:
      GO_LDFLAGS:
        - -buildmode=pie
  script: go build ${GO_ARGS} -ldflags="${GO_LDFLAGS}" ./

provides:
  - bin/pup

test: test "$(pup --version)" = {{version}}
