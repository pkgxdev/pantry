distributable:
  url: https://codeload.github.com/mikefarah/yq/tar.gz/refs/tags/v{{ version }}
  #url: https://github.com/mikefarah/yq/archive/refs/tags/v{{ version }}.tar.gz
  strip-components: 1

versions:
  github: mikefarah/yq/releases/tags

build:
  script: |
    go build -v -ldflags="$LDFLAGS"
    mkdir -p "{{ prefix }}"/bin
    mv yq "{{ prefix }}"/bin
  dependencies:
    go.dev: ^1.18
    pandoc.org:
  env:
    LDFLAGS:
      - -s -w
    linux:
      LDFLAGS:
      - -buildmode=pie

test:
  yq --version
