distributable:
  url: https://github.com/libsdl-org/SDL_ttf/releases/download/release-{{version}}/SDL{{version.major}}_ttf-{{version}}.tar.gz
  strip-components: 1
  
display-name: SDL_ttf

versions:
  - 2.24.0

dependencies:
  freetype.org: '>=2.0.4'
  harfbuzz.org: '>=2.3.1'
  libsdl.org: ^2.0.10
  
build:
  script: |
    ./configure $ARGS
    make --jobs {{ hw.concurrency }} install
  env:
    ARGS:
      - --prefix={{prefix}}
      - --disable-freetype-builtin
      - --disable-harfbuzz-builtin
      
test:
  - run: cc $FIXTURE -lSDL2_ttf
    fixture:
      extname: c
      contents: |
        #include <SDL2/SDL_ttf.h>
        
        int main() {
          SDL_version *version = TTF_Linked_Version();
          return 0;
        }
  - ./a.out
