distributable:
  url: https://github.com/pixel/hexedit/archive/refs/tags/{{version.raw}}.tar.gz
  strip-components: 1

versions:
  github: pixel/hexedit/tags

dependencies:
  invisible-island.net/ncurses: 6

build:
  dependencies:
    gnu.org/autoconf: '*'
  script: |
    ./autogen.sh
    ./configure --prefix={{prefix}}
    make
    make install

test:
  # hexedit -h shows usage and exits 1 (as noted in the previous FIXME).
  # It's a curses tool, output checks are unreliable.
  # Checking the documented exit code is the simplest robust test.
  script:
    # The `!` negates the exit status.
    # This command succeeds if `hexedit -h` exits non-zero.
    - run: "! hexedit -h >/dev/null 2>&1"


provides:
  - bin/hexedit
