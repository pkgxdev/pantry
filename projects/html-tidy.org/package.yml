distributable:
  url: https://github.com/htacg/tidy-html5/archive/refs/tags/{{version}}.tar.gz
  strip-components: 1

versions:
  github: htacg/tidy-html5

build:
  dependencies:
    tea.xyz/gx/cc: c99
    tea.xyz/gx/make: '*'
    cmake.org: '*'

  script: |
    cd build/cmake
    cmake --install-prefix={{prefix}} ../..
    make --jobs {{ hw.concurrency }} install
  env:
    ARGS:
      - --prefix="{{prefix}}"

provides:
  - bin/tidy

test:
  script:
    tidy --version | grep {{version}}
