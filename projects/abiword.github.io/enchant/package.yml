distributable:
  url: https://github.com/AbiWord/enchant/releases/download/v{{version}}/enchant-{{version}}.tar.gz
  strip-components: 1
versions:
  github: AbiWord/enchant
dependencies:
  gnome.org/glib: '*'
  hunspell.github.io: '*'
  aspell.net: '*'
build:
  dependencies:
    freedesktop.org/pkg-config: '*'
    gnu.org/groff: '*'
    linux:
      gnu.org/gcc: '*'
  script:
    - ./configure $ARGS
    - make --jobs {{ hw.concurrency }} install
    - run: cp $SRCROOT/enchant-2.pc enchant.pc
      working-directory: "{{prefix}}/lib/pkgconfig"
  env:
    ARGS:
      - --disable-dependency-tracking
      - --prefix={{prefix}}
      - --enable-relocatable
      - --disable-debug
      - --disable-silent-rules
    darwin:
      ARGS:
        - --with-applespell=false
provides:
  - bin/enchant-2
  - bin/enchant-lsmod-2
test:
  script:
    - enchant-lsmod-2
    - enchant-2 -l test.txt
    - enchant-2 -v | grep {{version}}
