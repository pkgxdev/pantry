distributable:
  url: https://opendev.org/opendev/git-review/archive/{{version}}.tar.gz
  strip-components: 1

versions:
  url: https://opendev.org/api/v1/repos/opendev/git-review/tags
  match: /"name":"\d+\.\d+\.\d+"/
  strip:
    - /^"name":"/
    - /"$/

dependencies:
  python.org: ^3

build:
  script: |
    python-venv.py {{prefix}}/bin/git-review

    {{prefix}}/venv/bin/pip install setuptools

provides:
  - bin/git-review

test:
  dependencies:
    git-scm.org: '*'
  script: |
    git-review --version | tee /dev/stderr | grep -q -w '{{version}}'
