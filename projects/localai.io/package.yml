distributable:
  url: git+https://github.com/mudler/LocalAI
  ref: ${{version.tag}}

display-name: LocalAI

versions:
  github: mudler/LocalAI

build:
  dependencies:
    go.dev: ^1.21
    cmake.org: ^3
    grpc.io: ^1
    protobuf.dev: ^25
    gnu.org/wget: ^1
    gnu.org/coreutils: ^9
    git-scm.org: ^2
  env:
    linux:
      # one of these will do it. probably.
      CGO_LDFLAGS:
        - -lstdc++fs
      LD_FLAGS:
        - -buildmode=pie
  script:
    - make build
    - install -D local-ai {{prefix}}/bin/local-ai

provides:
  - bin/local-ai

test: local-ai --version | grep {{version}}
