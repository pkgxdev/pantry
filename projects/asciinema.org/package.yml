distributable:
  url: https://github.com/asciinema/asciinema/archive/refs/tags/{{version.tag}}.tar.gz
  strip-components: 1

display-name: asciinema

versions:
  github: asciinema/asciinema

dependencies:
  python.org: ^3.12 # v2

build:
  dependencies:
    rust-lang.org: ^1.75
  script:
    - run: python-venv.sh {{prefix}}/bin/asciinema
      if: <3
    - run: cargo install --path . --root {{prefix}}
      if: '>=3'

provides:
  - bin/asciinema

test: test "$(asciinema --version)" = "asciinema {{version}}"
