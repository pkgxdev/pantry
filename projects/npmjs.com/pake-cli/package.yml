distributable:
  url: https://github.com/tw93/Pake/archive/refs/tags/V{{ version }}.tar.gz
  strip-components: 1

provides:
  - bin/pake

versions:
  github: tw93/Pake/tags
  strip: /V/

dependencies:
  nodejs.org: '>=16'
  npmjs.com: '*'
  rust-lang.org: '>=1.63'
  rust-lang.org/cargo: '*'
  darwin:
    github.com/create-dmg/create-dmg: 1
  linux:
    freedesktop.org/pkg-config: ^0.29
    cairographics.org: 1
    gnome.org/pango: 1
    gnome.org/gdk-pixbuf: 2

build: npm install --global --prefix={{prefix}} --install-links .

test:
  script: pake --name teaxyz tea.xyz $ARGS
  env:
    linux:
      ARGS:
        - --targets=deb